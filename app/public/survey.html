<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>FriendFinderMike</title>

  <!-- Latest compiled and minified CSS & JS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
    crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>


  <!-- Font Awesome Glyphicons -->
  <script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>

</head>
<div class="container">

  <body id="body">
    <h2>Survey Questions</h2>
    <hr>
    <h3>About You</h3>


    <form>
      <div id="questionBody">
        <div>
          <label for="Name">Name (Required)</label>
          <input type="text" class="form-control" id="name" placeholder="Please enter your name">

        </div>
        <div>
          <label for="exampleInputPassword1">Link to Photo (Required)</label>
          <input type="text" class="form-control" id="photo" placeholder="Please enter a link to a photo">
        </div>
        <hr>
        <h4>Question 1</h4>
        <div class="form-group">
          <label for="exampleFormControlSelect1">Chicago style pizza is better than New York style pizza.</label>
          <select class="form-control" id="question1">
            <option value="" disabled selected hidden>Select an answer</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>(Neutral)</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <h4>Question 2</h4>
        <div class="form-group">
          <label for="exampleFormControlSelect1">JFK was killed by a single shooter from the Texas Book Depository. </label>
          <select class="form-control" id="question2">
            <option value="" disabled selected hidden>Select an answer</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>(Neutral)</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <h4>Question 3</h4>
        <div class="form-group">
          <label for="exampleFormControlSelect1">Beyonce sucks.</label>
          <select class="form-control" id="question3">
            <option value="" disabled selected hidden>Select an answer</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>(Neutral)</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <h4>Question 4</h4>
        <div class="form-group">
          <label for="exampleFormControlSelect1">Batman isn't a superhero; he's just a really smart rich guy. </label>
          <select class="form-control" id="question4">
            <option value="" disabled selected hidden>Select an answer</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>(Neutral)</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <h4>Question 5</h4>
        <div class="form-group">
          <label for="exampleFormControlSelect1">Social media is destroying society.</label>
          <select class="form-control" id="question5">
            <option value="" disabled selected hidden>Select an answer</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>(Neutral)</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <h4>Question 6</h4>
        <div class="form-group">
          <label for="exampleFormControlSelect1">Humans haven't actually been to the moon.</label>
          <select class="form-control" id="question6">
            <option value="" disabled selected hidden>Select an answer</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>(Neutral)</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <h4>Question 7</h4>
        <div class="form-group">
          <label for="exampleFormControlSelect1">Two consenting adults should have the legal right to challenge each other to a duel, if they are so inclined, with
            no legal consequences for the winner.</label>
          <select class="form-control" id="question7">
            <option value="" disabled selected hidden>Select an answer</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>(Neutral)</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <h4>Question 8</h4>
        <div class="form-group">
          <label for="exampleFormControlSelect1"> The Industrial Revolution and its consequences have been a disaster for the human race.</label>
          <select class="form-control" id="question8">
            <option value="" disabled selected hidden>Select an answer</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>(Neutral)</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <h4>Question 9</h4>
        <div class="form-group">
          <label for="exampleFormControlSelect1">Game of Thrones is wildly overrated.</label>
          <select class="form-control" id="question9">
            <option value="" disabled selected hidden>Select an answer</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>(Neutral)</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <h4>Question 10</h4>
        <div class="form-group">
          <label for="exampleFormControlSelect1">Hillary Clinton and Donald Trump were the two worst presidential candidates of all time.</label>
          <select class="form-control" id="question10">
            <option value="" disabled selected hidden>Select an answer</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>(Neutral)</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>
        <hr>
        <br>
        <button type="button" class="btn btn-primary btn-lg btn-block" id="submit">Submit Questionnaire!</button>

      </div>
</form>
<div id="resultsModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal Content-->
    <div class="modal-content">

      <!-- "X" Button to close the modal -->
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h2 class="modal-title"><strong>Your new friend is:</strong></h2>
      </div>

      <!-- Modal Body (For Match Info) -->
      <div class="modal-body">
        <h2 id="matchName"></h2>
        <img id="matchImg" src="" alt="Image Not Found" style="max-width: 350px;">
      </div>

      <!-- Modal Footer (Close Button) -->
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>

    </div>

  </div>
</div>


</div>
<footer class="footer text-center">
  <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/mikebinder" target="_blank">GitHub Repo</a></p>
</footer> 
  

  </body>

</html>


<style>
  .container {

    padding-top: 25px;
  }

  .form-group {
    font-weight: bold;
  }

  .form-group {
    width: 70%;
  }
</style>

<!-- Inline jQuery script to push the submitted survey to the JSON file and also return best match.-->

<script type="text/javascript">

  $('#submit').on("click", function () {

//validation inside the on-click function. there is probably a cleaner way to do this but it's working.
    if ($("#name").val().trim() === '' || ($("#photo").val().trim() === ''))  {
      alert('Please complete the "About You" section!');
      location.reload()
    }

    else if ($("#question1, question2, question3, question4, question5, question6, question7, question8, question9, question10").val() === null) {
alert("Please answer all the questions")
location.reload()
    }

    else {

    var newUser = {
      name: $("#name").val(),
      photo: $("#photo").val(),
      scores: [$("#question1").val(),$("#question2").val(),$("#question3").val(),$("#question4").val(),$("#question5").val(),$("#question6").val(),$("#question7").val(),$("#question8").val(),$("#question9").val(),$("#question10").val()]
      
    }
    var currentURL = window.location.origin;
          $.post(currentURL + "/api/friends", newUser, function(data){
            // Add Best Match attributes to Modal
            $('#matchName').text(data.name);
            $('#matchImg').attr('src', data.photo);
            // Show the modal with the best match 
            $("#resultsModal").modal('toggle');


    
    
})
    
  }
})
  
  


</script>